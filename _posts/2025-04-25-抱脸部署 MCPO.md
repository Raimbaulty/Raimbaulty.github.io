---
layout: mypost
title: æŠ±è„¸éƒ¨ç½² MCPO
date: 2025-04-29
published: true
categories: è‡ªéƒ¨ç½²
tags: 
 - aitool
 - open-webui
---

## ä»‹ç»

MCPO æ˜¯ä¸€ä¸ªåŸºäºPythonçš„MCPä»£ç†æœåŠ¡ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

* MCPåè®®ä»£ç†è½¬å‘
* æ”¯æŒfetchæœåŠ¡è¯·æ±‚
* å¯é…ç½®å¤šä¸ªåç«¯MCPæœåŠ¡å™¨
* æä¾›å¥åº·æ£€æŸ¥æ¥å£

æœ¬ç¯‡æ•™ç¨‹æä¾›äº†ä»¥ä¸‹æœåŠ¡
- **ç»˜å›¾**ï¼ˆgrok2_imagesï¼‰
- **æœç´¢**ï¼ˆtavily-mcpï¼‰
- **å¤©æ°”åœ°å›¾** ï¼ˆbaidu-mapï¼‰
- **GitHubä»“åº“** ï¼ˆgithubï¼‰
- **æ–‡ä»¶æ“ä½œ** ï¼ˆfilesystemï¼‰
- **HTMLé¢„è§ˆ** ï¼ˆedgeone-pages-mcp-serverï¼‰

ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ `entrypoint.sh`è‡ªè¡Œæ·»åŠ æˆ–æ›¿æ¢æœåŠ¡

## å‡†å¤‡
- æ³¨å†Œ x.ai å¼€å‘è€…è´¦å·å¹¶åˆ›å»º API_KEYï¼š[ç‚¹å‡»å‰å¾€](https://accounts.x.ai/sign-up)ï¼Œå……å€¼5åˆ€åï¼Œ [åŒæ„æ•°æ®å…±äº«](https://console.x.ai/team/default/billing/credits) èµ é¢150åˆ€æ¯æœˆ

- æ³¨å†Œ tavily å¹¶åˆ›å»º API_KEYï¼š[ç‚¹å‡»å‰å¾€](https://app.tavily.com/home)ï¼Œå…è´¹è°ƒç”¨1000æ¬¡æ¯æœˆ

- æ³¨å†Œ baidu åœ°å›¾å¼€æ”¾å¹³å°å¹¶åˆ›å»º API_KEYï¼š[ç‚¹å‡»å‰å¾€](https://lbsyun.baidu.com/apiconsole/key)ï¼Œæ™®é€šåŠŸèƒ½5000æ¬¡æ¯å¤©

- æ³¨å†Œ github è´¦å·å¹¶åˆ›å»º AccessTokenï¼š[ç‚¹å‡»å‰å¾€](https://github.com/settings/tokens/new) ï¼Œéœ€è¦ Repo æƒé™

## é…ç½®

[ç‚¹å‡»è¿™é‡Œ](https://huggingface.co/new-space) åˆ›å»ºç©ºé—´ï¼ŒSpace åç§°å»ºè®®ä½¿ç”¨éšæœºå­—ç¬¦ï¼Œé€‰æ‹© Dockerï¼Œç„¶ååœ¨ Files ä¾¿ç­¾é¡µæ·»åŠ æˆ–è€…ä¿®æ”¹ä¸‹è¿°æ–‡ä»¶

- ç¯å¢ƒå˜é‡

| å˜é‡å                       | ç¤ºä¾‹å€¼                  | æè¿°              |
| ---------------------------- | ----------------------- | ----------------- |
| XAIAPI_KEY                   | xai-1234567890abcdef    | xai å¯†é’¥          |
| XAIAPI_BASE_URL              | `https://api.xai.ai/v1` | xai åŸºç¡€URL       |
| TAVILY_API_KEY               | tavily-9876543210fedcba | tavily å¯†é’¥       |
| BAIDU_MAP_API_KEY            | 9876543210fedcba        | baidu å¼€å‘è€… å¯†é’¥ |
| GITHUB_PERSONAL_ACCESS_TOKEN | ghp_9876543210fedcba    | gitHub å¯†é’¥       |


- Dockerfile
```
FROM python:3.11-slim

RUN useradd -ms /bin/bash mcp

WORKDIR /app

RUN apt-get update && \
    apt-get install -y curl unzip && \
    curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

COPY entrypoint.sh /app/
RUN chmod +x /app/entrypoint.sh

USER mcp
RUN curl -fsSL https://bun.sh/install | bash

ENV BUN_INSTALL="/home/mcp/.bun"
ENV PATH="${BUN_INSTALL}/bin:${PATH}"

USER root
RUN pip install --no-cache-dir mcpo uv

RUN mkdir -p /app/.cache/uv && chown -R mcp:mcp /app

ENV XDG_CACHE_HOME="/app/.cache"

USER mcp

EXPOSE 8000

ENTRYPOINT ["/app/entrypoint.sh"]
```
- entrypoint.sh
```
#!/bin/bash

cat <<EOF > /app/config.json
{
  "mcpServers": {
    "grok2_images": {
      "command": "npx",
      "args": [
        "-y",
        "grok2-image-mcp-server@0.1.3"
      ],
      "env": {
        "XAIAPI_KEY": "${XAIAPI_KEY}",
        "XAIAPI_BASE_URL": "${XAIAPI_BASE_URL}"
      }
    },
    "tavily-mcp": {
      "command": "npx",
      "args": [
        "-y",
        "tavily-mcp@0.1.2"
      ],
      "env": {
        "TAVILY_API_KEY": "${TAVILY_API_KEY}"
      }
    },
    "baidu-map": {
      "command": "npx",
      "args": [
          "-y",
          "@baidumap/mcp-server-baidu-map"
      ],
      "env": {
          "BAIDU_MAP_API_KEY": "${BAIDU_MAP_API_KEY}"
      }
    },
    "github": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-github"
      ],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "${GITHUB_PERSONAL_ACCESS_TOKEN}"
      }
    },
    "filesystem": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-filesystem",
        "/home/mcp"
      ]
    },
    "edgeone-pages-mcp-server": {
      "command": "npx",
      "args": ["edgeone-pages-mcp"]
    }    
  }
}
EOF

exec mcpo --config /app/config.json
```
- README.md
```
---
layout: mypost
title: mcp
emoji: ğŸ’»
colorFrom: pink
colorTo: indigo
sdk: docker
pinned: false
app_port: 8000
---
```

## ä½¿ç”¨
è¿™é‡Œä»¥ Open-WebUI ä¸ºä¾‹ï¼Œç‰ˆæœ¬è¦æ±‚ v0.6.0+ï¼Œå»ºè®®æ›´è¡Œåˆ°æœ€æ–°ç‰ˆæœ¬
1. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼Œå·¦ä¸‹è§’ç‚¹å‡»å¤´åƒ - ç®¡ç†å‘˜é¢æ¿ - è®¾ç½® - å·¥å…·ï¼Œç‚¹å‡» + æ·»åŠ ä¸€ä¸ªè¿æ¥

2. URI è¾“å…¥ `https://xxx-xxx.hf.space/grok2_images`ï¼Œå¯†åŒ™ç•™ç©ºå³å¯ï¼Œç‚¹å‡»ä¿å­˜ï¼Œç±»ä¼¼çš„ï¼Œæ›¿æ¢ grok2_images æ·»åŠ å…¶ä»–æœåŠ¡

3. å…¨éƒ¨æ·»åŠ æˆåŠŸåå…ˆåç‚¹å‡»å³ä¸‹è§’ ä¿å­˜å’Œå·¦ä¸Šè§’ æ–°å¯¹è¯ï¼Œæ¥ç€ç‚¹å‡»è¾“å…¥æ¡†çš„ + å·å¯ä»¥æŸ¥çœ‹å¹¶å¼€å…³å·²æ·»åŠ çš„MCPï¼Œå»ºè®®éœ€è¦æ—¶å†æ‰“å¼€

## å‚è€ƒé“¾æ¥

- [cr-zhichen/mcpo-proxy](https://github.com/cr-zhichen/mcpo-proxy)

- [[è¯´äººè¯ç³»åˆ—]æœ€æ–°ç‰ˆv0.6.0 openwebui æ€ä¹ˆé…ç½®ä½¿ç”¨ mcp ç»éªŒåˆ†äº« ](https://linux.do/t/topic/529083)