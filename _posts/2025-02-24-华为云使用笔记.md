---
layout: mypost
title: 华为云使用笔记
date: 2025-02-24
published: true
categories: 笔记
tags: 
 - linux
---

## Github 加速安装

如果失效，可前往[https://www.ipaddress.com/](https://www.ipaddress.com/)查询最新IP后替换

```bash
sudo bash -c 'cat <<EOF >> /etc/hosts

# GitHub Hosts
140.82.114.3      github.com
140.82.112.4      gist.github.com
185.199.111.153   assets-cdn.github.com
185.199.111.133   raw.githubusercontent.com
185.199.110.133   gist.githubusercontent.com
EOF'
```

## Nginx 加速安装

访问 [**华为nginx仓库**](https://mirrors.huaweicloud.com/nginx/) 查看最新版本，截止发帖时最新版本是 v1.27.3

```bash
sudo apt-get update && sudo apt-get install -y libpcre3 libpcre3-dev zlib1g zlib1g-dev build-essential && wget https://mirrors.huaweicloud.com/nginx/nginx-1.27.3.tar.gz && tar -xf nginx-1.27.3.tar.gz && cd nginx-1.27.3 && ./configure && make && sudo make install && echo 'export PATH=$PATH:/usr/local/nginx/sbin' >> ~/.bashrc && source ~/.bashrc && nginx -v
```

## NodeJs 加速安装

访问 [**华为nodejs仓库**](https://mirrors.huaweicloud.com/nodejs/) 查看最新版本，截止发帖时最新版本是 v23.3.0

```bash
wget https://mirrors.huaweicloud.com/nodejs/v23.3.0/node-v23.3.0-linux-x64.tar.xz && tar -xf node-v23.3.0-linux-x64.tar.xz && sudo cp -r node-v23.3.0-linux-x64/{bin,include,lib,share} /usr/ && node -v && npm -v
```

## Npm 加速安装

```bash
npm config set registry https://mirrors.huaweicloud.com/npm-software/
```

## Docker 加速安装

### 软件

- Debian

  ```bash
  sudo apt update && sudo apt-get -y install ca-certificates curl gnupg && sudo install -m 0755 -d /etc/apt/keyrings && curl -fsSL http://mirrors.huaweicloud.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg && sudo chmod a+r /etc/apt/keyrings/docker.gpg && echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] http://mirrors.huaweicloud.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null && sudo apt update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io && sudo systemctl start docker && sudo systemctl enable docker && docker -v
  ```

- Ubuntu

  ```bash
  sudo apt update && sudo apt-get -y install ca-certificates curl gnupg && sudo install -m 0755 -d /etc/apt/keyrings && curl -fsSL http://mirrors.huaweicloud.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg && sudo chmod a+r /etc/apt/keyrings/docker.gpg && echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] http://mirrors.huaweicloud.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null && sudo apt update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io && sudo systemctl start docker && sudo systemctl enable docker && docker -v
  ```


安装后，将当前用户加入dockers组

```bash
sudo usermod -aG docker $USER
newgrp docker
```

### 镜像

打开或创建 **daemon.json**

```bash
sudo vi /etc/docker/daemon.json
```

- 官网方案 
  登录 [容器镜像服务控制台](https://console.huaweicloud.com/swr/#/swr/dashboard)，左侧导航栏选择 “镜像资源 > 镜像中心”，右上角单击 “镜像加速器”，复制弹窗中的代码块，格式如下

  ```json
  {
      "registry-mirrors": [ 
          "https://********************.mirror.swr.myhuaweicloud.com" 
      ]
  }
  ```


- 佬友方案 
  感谢 [Clever Hu](https://linux.do/u/cleverhu) 佬友提供的加速服务

  ```json
  {
     "registry-mirrors":[
        "https://docker.imgdb.de"
     ]
  }
  ```


重启 docker

```bash
sudo systemctl restart docker
```

查看修改情况

```bash
docker info
```

## 参考链接

- [**华为云设置镜像加速器**](https://support.huaweicloud.com/usermanual-swr/swr_01_0045.html)

- [**docker 加速在线使用（支持所有镜像仓库**）](https://linux.do/t/topic/272666) 