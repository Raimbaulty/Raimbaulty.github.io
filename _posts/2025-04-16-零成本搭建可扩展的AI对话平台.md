---
layout: mypost
title: 零成本搭建可扩展的AI对话平台
date: 2025-04-16
published: true
categories: 自部署
tags: 
 - aitool
---

<div data-theme-toc="true"> </div>

## 项目介绍

本教程使用的是 @zhong_little 佬二创的  **ChatGPT-Next-Web** 项目，各位路过顺手点个star

---
https://github.com/QAbot-zh/ChatGPT-Next-Web

:gem: 已兼容 think 标签式和 reasoning_content 式思考过程
:gem: 对齐官网推理，思考内容会过滤，不参与上下文对话以节约 token

---
**ChatGPT-Next-Web** 原项目地址

---
https://github.com/ChatGPTNextWeb/NextChat

---
感谢各位佬为开源社区添砖加瓦

## 开始之前

本教程使用到的云服务提供商

---
- **Github**
- **Cloudflare**
- **Serv00**
- **Upstash**
---
感谢这些公司提供的免费服务，使得我们能够零成本搭建AI对话平台

## 部署服务
### Github 导入
* 注册 [Github](https://github.com/)，导入仓库：[点击前往](https://github.com/new/import)

* **The URL for your source repository*** 填写：
`https://github.com/QAbot-zh/ChatGPT-Next-Web`

* **Repository name*** 填写：
`ChatGPT-Next-Web` 

* 然后点击 <kbd>Begin import</kbd> 等待导入完成
### Cloudflare 部署
* 注册 [Cloudflare](https://dash.cloudflare.com)，新建pages：[点击前往](https://dash.cloudflare.com/?to=/:account/pages/new/provider/github)

* 选择您刚刚创建的仓库`ChatGPT-Next-Web` ，点击 **开始设置**

* **框架预设** 选择 `Next.js` ,点击 **环境变量(高级) - + 添加变量**，建议添加：

| 变量名         | 注释                                    | 示例值                                       |
| -------------- | --------------------------------------- | -------------------------------------------- |
| CODE           | 站点密码                                | CODE1,CODE2                                  |
| BASE_URL       | OpenAI 格式的基础 URL                   | `https://api.openai.com`                     |
| OPENAI_API_KEY | OpenAI 格式的认证令牌                   | sk-xxxxxxxxxxxx                              |
| CUSTOM_MODELS  | 自定义模型，`-all` 表示删除所有内置模型 | -all,gpt-4o-mini,deepseek-reasoner,grok-beta |
| NODE_VERSION   | NodeJS 版本                             | 20                                           |

**注意**：**gpt-4o-mini** 是默认任务模型（生成标题、ocr、中译英等），若要更换请参考 [环境变量](https://github.com/QAbot-zh/ChatGPT-Next-Web#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F) 

---
* 添加好变量后，点击 **保存并部署**，然后点击 **继续处理项目**

* 切换到 **设置** 标签，点击 **运行时** 菜单， 编辑 **兼容性标志** 为 `nodejs_compat`

* 切换到 **部署** 标签， 在 **所有部署** 点击 **···** → **重试部署**

* 切换到 **自定义域** 标签，点击 **设置自定义域**，输入您的域名或子域名，点击 **继续** → **激活域**

* 如果暂时没有域名，可以直接使用 **部署** 标签页下自动创建的 `****.pages.dev` 域
---
**注意：** 后续可继续在 **设置** 标签添加修改变量，但注意修改添加后需重试部署方可生效

## 使用服务
### 电脑端
浏览器打开自定义域后点击右上角的俄罗斯方块，勾选并确认安装到到任务栏或桌面使用

### 手机端
同样浏览器打开自定义域后，点击浏览器的分享按钮，添加到主屏幕，安装到桌面使用

### 快捷键

| 功能               | 快捷键                 | 功能             | 快捷键                 |
| ------------------ | ---------------------- | ---------------- | ---------------------- |
| 打开新聊天         | `Ctrl` + `Shift` + `O` | 聚焦输入框       | `Shift` + `Esc`        |
| 复制最后一个代码块 | `Ctrl` + `Shift` + `;` | 重试最后一个提问 | `Ctrl` + `Shift` + `L` |
| 复制最后一个回复   | `Ctrl` + `Shift` + `C` | 显示快捷方式     | `Ctrl` + `/`           |
| 搜索聊天记录       | `Ctrl` + `Alt` + `F`   |                  |                        |

**注意**：初次使用需要点击左下角 ⚙ 按钮，找到 **访问密码**，输入环境变量定义的 **CODE** 值

---
到这里，基本阶段的配置就完成了，如果仍有余力，可以继续浏览下面的内容

## 云备份
以下脚本使用到了 @zhong_little 佬的 **go-file-server** 服务

---
https://github.com/QAbot-zh/go-file-server

灵感来自 @Saika 佬的 serv00 脚本

---
https://github.com/k0baya

---
* 注册 [Serv00](https://www.serv00.com) (暂未开放)并ssh登录
* 如果首次使用，需先打开服务
```
devil binexec on
```
* 断开ssh重连，然后执行安装脚本
---
[color=red]**警告**：执行脚本将会重置机器，请务必确认已知其影响[/color]

---
* 安装 go-file-server，输入 **部署服务** 填写的 **CODE** 完成部署
```
bash <(curl -sL https://raw.githubusercontent.com/Raimbaulty/freebsd/main/go-file-server.sh)
```

---
到这里，云备份就部署好了，使用步骤如下

* 在设备 A 使用站点服务后，点击输入框顶部右上角的 ☁，输入 `***.serv00.net`

* 点击 <kbd>云备份(本地记录上传云端)</kbd> 上传对话记录

* 在设备 B 同样点击输入框顶部右上角的 ☁，输入 `***.serv00.net`

* 点击 <kbd>云导入(加载云端记录)</kbd>，选择备份点击 <kbd>导入</kbd> 即可将 A 设备的对话记录导入到 B 设备

## 同步配置

* 注册 [Upstash](https://console.upstash.com/)，点击 **Create Database** 新建一个redis数据库

* 下拉找到 **REST API**，依次点击 <kbd>UPSTASH_REDIS_REST_URL</kbd> 和 <kbd>UPSTASH_REDIS_REST_TOKEN</kbd> 复制保存到记事本

* 访问您的自定义域名，页面加载完成后点击左下角 ⚙ 按钮

* 找到 **云端数据**，点击 **配置**，同步类型选择 **UpStash**

* 从记事本复制输入 `UPSTASH_REDIS_REST_URL` 和 `UPSTASH_REDIS_REST_TOKEN`

* 点击 <kbd>检查可用性🔌</kbd>，图标变成带√的云朵表示成功，带×表示输入有误，完成后点击确认

* 自定义设置后，还是在 **云端数据**，点击 **同步** 即可同步设置和对话