---
layout: mypost
title: æŠ±è„¸éƒ¨ç½² Grok2API æ•™ç¨‹
date: 2025-03-24
published: true
categories: è‡ªéƒ¨ç½²
tags: 
 - aitool
---

## éƒ¨ç½²

[ç‚¹å‡»è¿™é‡Œ](https://huggingface.co/login?next=%2Fnew-space) åˆ›å»ºç©ºé—´ é€‰æ‹© Docker ç„¶ååœ¨Filesæ·»åŠ æˆ–è€…ä¿®æ”¹ä¸‹é¢æåˆ°çš„ç¯å¢ƒå˜é‡å’Œæ–‡ä»¶

### ç¯å¢ƒå˜é‡

| å˜é‡å                | ç¤ºä¾‹å€¼                          | æè¿°                                                         |
| :-------------------- | :------------------------------ | :----------------------------------------------------------- |
| PROXY                 | socks5://************          | å¯é€‰ï¼Œä»£ç†åœ°å€ï¼Œæ”¯æŒ https å’Œ socks5                         |
| PORT | 7860 | å¯é€‰ï¼ŒæœåŠ¡éƒ¨ç½²ç«¯å£ï¼Œé»˜è®¤ 3000 |
| IS_CUSTOM_SSO         | false                           | å¯é€‰ï¼Œæ˜¯å¦å¼€å¯ç›´æ¥ä»£ç†ï¼Œé»˜è®¤ false |
| SSO                   | eyJ************,eyJ************ | å…³é—­ç›´æ¥ä»£ç†æ—¶å¡«å†™ï¼Œæ™®é€šè´¦æˆ·ä»¤ç‰Œï¼Œå–è‡ªGrokå®˜ç½‘Cookieçš„ssoå€¼ |
| SSO_SUPER | eyJ************,eyJ***********  | å…³é—­ç›´æ¥ä»£ç†æ—¶å¡«å†™ï¼Œä¼šå‘˜è´¦æˆ·ä»¤ç‰Œï¼Œå–è‡ªGrokå®˜ç½‘Cookieçš„ssoå€¼  |
| API_KEY               | sk-12345                        | å…³é—­ç›´æ¥ä»£ç†æ—¶å¿…å¡«ï¼Œé»˜è®¤ sk-123456ï¼Œå¼€å¯ç›´æ¥ä»£ç†æ—¶ä¸å¡«å†™ |
| PICGO_KEY             | chv_************                | ç»˜å›¾å¿…é€‰ï¼ŒPicgo å›¾åºŠå¯†é’¥ï¼Œä¸ TUMY_KEY äºŒé€‰ä¸€                 |
| TUMY_KEY              |                                 | ç»˜å›¾å¿…é€‰ï¼ŒTUMYå›¾åºŠå¯†é’¥ï¼Œä¸ PICGO_KEY äºŒé€‰ä¸€                  |
| FILTERED_TAGS | grok:render | å¯é€‰ï¼Œéœ€è¦å»æ‰çš„æ ‡ç­¾ |
| CF_CLEARANCE          | `cf_clearance=xxxxxx`           | å¯é€‰ï¼ŒCloudflare å…æ‰˜ç®¡å‡­æ®ï¼Œ å–è‡ªGrokå®˜ç½‘Cookieçš„cf_clearanceå€¼ |
| IS_TEMP_CONVERSATION  | true                            | å¯é€‰ï¼Œå¼€å¯ä¸´æ—¶å¯¹è¯ï¼Œé»˜è®¤false                                |
| SHOW_THINKING         | true                            | å¯é€‰ï¼Œæ˜¾ç¤ºæ€è€ƒè¿‡ç¨‹ï¼Œé»˜è®¤false                                |
| SHOW_SEARCH_RESULTS | true                            | å¯é€‰ï¼Œæ˜¾ç¤ºæœç´¢å†…å®¹ï¼Œé»˜è®¤true                                |
| MANAGER_SWITCH        | false                           | å¯é€‰ï¼Œå¼€å¯ç®¡ç†åå°ï¼Œé»˜è®¤false                                |
| ADMINPASSWORD         | password                        | å¯é€‰ï¼Œç®¡ç†å‘˜å¯†ç ï¼Œé»˜è®¤ç©ºå€¼                                   |

### é…ç½®æ–‡ä»¶

#### Dockerfile

è‹¥è¦ä½¿ç”¨å¤–éƒ¨è½®è¯¢å·¥å…·ï¼Œå¦‚ gpt-loadï¼Œgpt-load ä¸Šæ¸¸åœ°å€å¡«å†™æŠ±è„¸æœåŠ¡åœ°å€ï¼Œå¹¶å°†ç¯å¢ƒå˜é‡ `IS_CUSTOM_SSO` æ”¹ä¸º `True`

```dockerfile
FROM python:3.10-slim

# å®‰è£…æ„å»ºä¾èµ–
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential \
    curl \
    && rm -rf /var/lib/apt/lists/*

# åˆ›å»ºç”¨æˆ·
RUN useradd -m -u 1000 -s /bin/bash grok

# å®‰è£… Python ä¾èµ–
RUN pip install --no-cache-dir flask requests curl_cffi werkzeug loguru python-dotenv patchright
RUN python -m patchright install --with-deps chrome

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /home/grok/app

# å¤åˆ¶åº”ç”¨æ–‡ä»¶
COPY --chown=grok:grok . .

# åˆ›å»ºæ•°æ®ç›®å½•å¹¶è®¾ç½®æƒé™
RUN mkdir -p /home/grok/app/data && \
    chown -R grok:grok /home/grok/app && \
    chmod -R 755 /home/grok/app

# åˆ‡æ¢åˆ°é root ç”¨æˆ·
USER grok

ENV PORT=7860
ENV IS_CUSTOM_SSO=False
ENV SHOW_SEARCH_RESULTS=False
ENV FILTERED_TAGS=grok:render

EXPOSE 7860

CMD ["python", "app.py"]
```

#### README.md

```markdown
---
title: Grok2API
emoji: ğŸ¦€
colorFrom: yellow
colorTo: yellow
sdk: docker
pinned: false
---
```

#### ä¸»æ–‡ä»¶

- ä¸»ç¨‹åºï¼š`app.py`ï¼Œ[ç‚¹å‡»å¤åˆ¶](https://raw.githubusercontent.com/VeroFess/grok2api/main/app.py)

  æ³¨æ„ä¿®æ”¹ `/data` ä¸º `/home/grok/app/data"`ï¼Œ `./data/chrome` ä¸º `/home/grok/app/chrome"`

- ç™»å½•é¡µï¼š`/templates/login.html`ï¼Œ[ç‚¹å‡»å¤åˆ¶](https://raw.githubusercontent.com/VeroFess/grok2api/main/templates/login.html)

- ç®¡ç†é¡µï¼š`/templates/manager.html`ï¼Œ[ç‚¹å‡»å¤åˆ¶](https://raw.githubusercontent.com/VeroFess/grok2api/main/templates/manager.html)

## å‚è€ƒé“¾æ¥

- [groké€†å‘ç»™ä¸ªgrokæ ¡éªŒå‚æ•°çš„å…è´¹æ¥å£å§ x-statsig-id](https://linux.do/t/topic/685667) 
- [ã€Œelemeã€æ‰‹æ‘¸æ‰‹æ•™ä½ å¤æ´»grok2api_python é™„x-statsig-idéƒ¨åˆ†ç®—æ³•](https://linux.do/t/topic/679268) 
