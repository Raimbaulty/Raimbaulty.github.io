---
layout: mypost
title: Gemini 防打野
date: 2025-09-05
published: true
categories: 网络安全
tags: 
 - gemini
---

如果还没有创建 Key，[点击这里](https://aistudio.google.com/apikey)，再点击 **Create API key** 创建

[点击进入 Credentials 页面](https://console.cloud.google.com/apis/credentials) ，确认左上角选择了正确的 **项目（Project）**

在 **API keys** 列表里找到用于 Gemini API 的 key，点击 API key 名称进入配置页

## 配置介绍

进入后会看到以下配置

- **Application restrictions**
  
  - `None`：不限制来源，测试时可以用，但不安全
  - `Websites` ： 只允许来自指定域名的请求，前端网站常用
  - `IP addresses` ： 只允许来自指定 IP 的请求，后端服务常用
  - `Android apps`：只允许来自特定安卓应用的请求
  -  `iOS apps` ：只允许来自特定苹果应用的请求
  
  注意每个key只能选择一个限制选项，不能多选
  
- **API restrictions**  
  
  - 可以限制这个 key 只能调用特定 API（建议加上 *Generative Language API*）

## 配置设置

这里介绍下前后端的限制方法

- **后端调用** 
  
  -  选择`IP address `
  - 点击 Add（添加）
  - 在输入框输入服务器的公网 IP
  
- **前端调用**  
  
  - 选择 `Websites`
  - 点击 Add（添加）
  - 在输入框输入：  
    - `https://example.com/*`  
    - `http://localhost:3000/*`
  
  使用时，以 uni-api 为例， `api.yaml` 添加
  
  ```yaml
        headers:
          referer: https://example.com/*
  ```

​	注意不要把 API key 直接放到浏览器前端，这样即使限制了 referer 也能通过调试模式查看到，推荐的做法： 

​	前端 → 调用后端 → 后端读取存储的 API key 和 Referer→ 后端请求 Gemini API

